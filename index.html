<!DOCTYPE html>
<html lang="en">
<head>
    <title>DaVinci CDex (Payer)</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="lib/fhir-client-0.1.8.js"></script>
    <script src="lib/jquery-3.3.1.js"></script>
    <link href="css/bootstrap.css" rel="stylesheet">

    <!--TODO: don't use CDN-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <link href="css/custom.css" rel="stylesheet">
    <script src="js/config.js"></script>
</head>
<body>
<div class="wine-row">
    <img src="images/request.png" style="height:80px; width:130px">
    <div class="wine-text-container"><h1>CDex Data Consumer (Payer)</h1></div>
</div>

<div id="task-intro-screen" class="card alert-info screen">
    <div class="card-body">
        <h5 class="card-title">CDex Scenarios Description</h5>
        <p class='card-text' id='task-intro'></p>
        <a href="#" class="btn btn-primary" id="btn-task">Task Based Approach</a>
        <a href="#" class="btn btn-primary" id="btn-query">Direct Query</a>
    </div>
</div>
<div></div>

<div id="query-request-screen" class="card alert-info screen">
    <div class="card-body">
        <h5 class="card-title">Direct Query Type</h5>
        <label for="basic-url">Query URI</label>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon3">&clinical-status=active,recurrance,remission</span>
            </div>
            <input type="text" class="form-control" id="basic-url" aria-describedby="basic-addon3">
        </div>
        <a href="#" class="btn btn-primary" id="btn-execute-query">Proceed</a>
    </div>
</div>
<div id="preview-communication-screen" class="screen">
    <p>
        <div class='dvt' id='resources-list'>

        </div>
    </p>
    <button type="button" class="btn btn-secondary" id="btn-back">Back</button>
</div>
<div id="preview-screen" class="screen">
    <table class='table'>
        <tr><td colspan="5"><img src="images/glow.gif" id="spinner-preview" style="height:400px; width:500px"></td></tr>
        <tbody id='preview-list'></tbody>
    </table>
    <button type="button" class="btn btn-secondary" id="btn-back-communication">Back</button>
</div>
<div id="communication-request-screen" class="screen">
    <h3>Patient: <span id="commRes-patient-name">[loading...]</span></h3>
    <p><button type="button" class="btn btn-primary" id="btn-task-request">Create Data Request</button></p>
    <div><p><div class='dvt'>
        <table class='table'>
            <thead>
            <th>Data Request (Task)</th>
            <th>Created</th>
            <th>Workflow Type</th>
            <th>Status</th>
            </thead>
            <tbody id='comm-request-list'></tbody>
        </table>
    </div></p></div>
    <div id='communication-request-screen-loader'><p>[loading...]</p></div>
</div>
<div id="direct-query-request-screen" class="card alert-info screen">
    <div class="card-body">
        <h3>Patient: <span id="commRes-patient-name">[loading...]</span></h3>
        <select class='form-control' id='search-criteria'>
            <option>-- Select search criteria --</option>
        </select>
        <div id="subsearch" class="subsearch"></div>
        <p><button type="button" class="btn btn-primary" id="btn-query-request">Direct Query Request</button></p>
    </div>
</div>
<div id="data-request-screen" class="screen">
    <h3>Edit data request (patient: <span id="patient-name"><p>[loading...]</p></span>)</h3>
    <div id="subscription-selection"><p>
        Workflow Type
        <!--<input type="checkbox" id="chk-subscription" checked="checked">-->
        <div class="btn-group btn-group-toggle" data-toggle="buttons">
            <label class="btn btn-primary active">
              <input type="radio" name="options" id="polling" autocomplete="off" checked> Polling
            </label>
            <label class="btn btn-primary">
              <input type="radio" name="options" id="subscription" autocomplete="off"> Subscription
            </label>
          </div>
    </p></div>
    <div id="menu-request-list"><p>
        Request Details
        <div class='dvt'>
        <div id='selection-query-list'></div>
    </div></p></div>
    <!--<div><a href='#' id="btn-add">add another request</a></div>-->
    <div><!--<br>-->
    <button type="button" class="btn btn-primary" id="btn-review">Review</button>
    </div>
</div>
<div id="review-screen" class="screen">
    <h3>Review data request (patient: <span id="review-name"><p>[loading...]</p></span>)</h3>
    <p class="alert-warning card-text">
        <strong>Workflow:</strong> <span id="review-workflow" class="card-text"></span><br/>
        <strong>Request:</strong> <span id='final-list'></span>
    </p>
    <div>
        <button type="button" class="btn btn-secondary" id="btn-edit">Edit</button>
        <button type="button" class="btn btn-secondary" id="btn-configuration">Configure endpoint</button>
        <button type="button" class="btn btn-primary" id="btn-submit">Submit</button>
    </div>
</div>
<div id="confirm-screen" class="card alert-info screen">
    <div class="card-body">
        <h5 class="card-title">Confirmation</h5>
        <div id="request-id"></div>
        <p class="card-text">Data request (Task) successfully sent to Data Source (Provider). </p>
        <p class="card-text" id="submit-endpoint"></p>
        <p class="card-text"><textarea id="text-output"></textarea></p>
        <p class="card-text" id="submit-endpoint2"></p>
        <p class="card-text"><textarea id="text-output2"></textarea></p>
        <p class="card-text"><a href="#" class="btn btn-primary" id="btn-restart">OK</a></p>
    </div>
</div>
<div id="dq-confirm-screen" class="card alert-info screen">
    <div class="card-body">
        <h5 class="card-title">Confirmation</h5>
        <p class="card-text">Direct Query request successfully sent to url: </p>
        <p class="card-text" id="dq-submit-endpoint"></p>
        <p class="card-text"><textarea id="dq-text-output"></textarea></p>
        <p class="card-text"><a href="#" class="btn btn-primary" id="dq-btn-restart">OK</a></p>
    </div>
</div>
<div id="config-screen" class="card alert-info screen">
    <div class="card-body">
        <h5 class="card-title">Provider Endpoint Configuration</h5>
        <p class='card-text'>
        <p>
            <select class='custom-select' id='config-select'></select>
        </p>
        <p>
            <textarea id="config-text"></textarea>
        </p>
        </p>
        <a href="#" class="btn btn-primary" id="btn-config">Save configuration</a>
    </div>
</div>
<div id="error-screen" class="card alert-danger screen">
    <div class="card-body">
        <h5 class="card-title" id='error-title'>Error</h5>
        <p class='card-text' id='error-message'></p>
    </div>
</div>
<script src="js/app.js"></script>
</body>
</html>
